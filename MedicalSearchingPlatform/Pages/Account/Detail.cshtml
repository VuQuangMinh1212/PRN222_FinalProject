@page
@model MedicalSearchingPlatform.Pages.Account.DetailModel
@{
    ViewData["Title"] = "User Profile";
}

<div class="account-detail container mt-5">
    <h2 class="text-center mb-4">User Profile</h2>

    <div class="card shadow-lg p-4">
        <div class="row align-items-center">
            <!-- Profile Picture -->
            <div class="col-md-4 text-center">
                <img src="~/images/default-profile.png" class="rounded-circle img-fluid border"
                     alt="Profile Picture" width="180" height="180">
                <h4 class="mt-3">@Model.UserDetail.FullName</h4>
                <span class="badge @(Model.UserDetail.IsActive ? "bg-success" : "bg-danger")">
                    @(Model.UserDetail.IsActive ? "Active" : "Deactivated")
                </span>
            </div>

            <!-- User Info -->
            <div class="col-md-8">
                <dl class="row">
                    <dt class="col-sm-4 fw-bold">Email:</dt>
                    <dd class="col-sm-8">@Model.UserDetail.Email</dd>

                    <dt class="col-sm-4 fw-bold">Phone:</dt>
                    <dd class="col-sm-8">@Model.UserDetail.PhoneNumber</dd>

                    <dt class="col-sm-4 fw-bold">Role:</dt>
                    <dd class="col-sm-8">
                        <span class="badge bg-primary">@Model.Role</span>
                    </dd>
                </dl>

                <div class="d-flex gap-2 mt-3">
                    <a asp-page="/Account/Edit" asp-route-id="@Model.UserDetail.Id" class="btn-edit-profile">
                        <i class="bi bi-pencil"></i> Edit Profile
                    </a>
                    <a asp-page="/Index" class="btn-back">
                        <i class="bi bi-arrow-left"></i> Back
                    </a>
                    <!-- Button for Patients to View Medical Records -->
                    @if (Model.Role == "Patient")
                    {
                        <a asp-page="/MedicalRecordPage/Index" asp-route-UserId="@Model.UserDetail.Id" class="btn btn-info">
                            <i class="bi bi-file-medical"></i> View Medical Records
                        </a>
                    }
                    @if (Model.Role == "Doctor")
                    {
                        <a asp-page="/MedicalRecordPage/Index" asp-route-UserId="@Model.UserDetail.Id" class="btn btn-info">
                            <i class="bi bi-file-medical"></i> View Medical Records
                        </a>
                    }
                </div>
            </div>
        </div>
    </div>
</div>